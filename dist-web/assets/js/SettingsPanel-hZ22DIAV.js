import{j as s}from"./index-web-Btt7U4B2.js";import{r as j}from"./utils-vendor-BVqnKQB6.js";import"./react-vendor-DDxydHEc.js";import"./virtual-scroll-DDeySHGB.js";function w({showSettings:m,setShowSettings:t,mapSettings:c,setMapSettings:d,markers:h,totalPhotos:g,cacheStats:o,setCacheStats:N,setMarkers:v}){const[i,r]=j.useState("map"),[a,l]=j.useState(c),x=()=>{JSON.stringify(a)!==JSON.stringify(c)&&(window.confirm("è®¾ç½®å·²æ›´æ”¹ä½†æœªä¿å­˜ï¼Œæ˜¯å¦ä¿å­˜ï¼Ÿ")?(d(a),localStorage.setItem("mapSettings",JSON.stringify(a))):l(c)),t(!1)};return m?s.jsx("div",{className:"settings-overlay",onClick:x,children:s.jsxs("div",{className:"settings-panel",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"settings-nav",children:[s.jsxs("div",{className:"settings-nav-header",children:[s.jsx("span",{className:"nav-icon",children:"âš™ï¸"}),s.jsx("span",{className:"nav-title",children:"è®¾ç½®"})]}),s.jsxs("div",{className:"settings-nav-items",children:[s.jsxs("button",{className:i==="map"?"active":"",onClick:()=>r("map"),children:[s.jsx("span",{children:"ğŸ—ºï¸"})," åœ°å›¾æ˜¾ç¤º"]}),s.jsxs("button",{className:i==="performance"?"active":"",onClick:()=>r("performance"),children:[s.jsx("span",{children:"ğŸš€"})," æ€§èƒ½ä¼˜åŒ–"]}),s.jsxs("button",{className:i==="storage"?"active":"",onClick:()=>r("storage"),children:[s.jsx("span",{children:"ğŸ’¾"})," å­˜å‚¨ç®¡ç†"]}),s.jsxs("button",{className:i==="about"?"active":"",onClick:()=>r("about"),children:[s.jsx("span",{children:"â„¹ï¸"})," å…³äº"]})]})]}),s.jsxs("div",{className:"settings-content",children:[s.jsx("button",{className:"settings-close",onClick:x,children:"âœ•"}),i==="map"&&s.jsxs("div",{className:"settings-page",children:[s.jsx("h2",{children:"ğŸ—ºï¸ åœ°å›¾æ˜¾ç¤º"}),s.jsx("p",{className:"page-desc",children:"è°ƒæ•´åœ°å›¾çš„æ˜¾ç¤ºæ•ˆæœå’Œäº¤äº’æ–¹å¼"}),s.jsxs("div",{className:"setting-group",children:[s.jsx("h3",{children:"ç”»è´¨è®¾ç½®"}),s.jsxs("div",{className:"setting-row",children:[s.jsxs("div",{className:"setting-label",children:[s.jsx("strong",{children:"æŠ—é”¯é½¿"}),s.jsx("span",{children:"å¹³æ»‘åœ°å›¾è¾¹ç¼˜ï¼Œæå‡ç”»è´¨ä½†ä¼šå¢åŠ GPUè´Ÿæ‹…"})]}),s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:a.antialias,onChange:e=>l(n=>({...n,antialias:e.target.checked}))}),s.jsx("span",{className:"slider"})]})]})]}),s.jsxs("div",{className:"setting-group",children:[s.jsx("h3",{children:"äº¤äº’è®¾ç½®"}),s.jsxs("div",{className:"setting-row",children:[s.jsxs("div",{className:"setting-label",children:[s.jsx("strong",{children:"å…è®¸æ—‹è½¬"}),s.jsx("span",{children:"å³é”®æ‹–åŠ¨å¯æ—‹è½¬åœ°å›¾è§†è§’"})]}),s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:a.dragRotate,onChange:e=>l(n=>({...n,dragRotate:e.target.checked}))}),s.jsx("span",{className:"slider"})]})]}),s.jsxs("div",{className:"setting-row",children:[s.jsxs("div",{className:"setting-label",children:[s.jsx("strong",{children:"ä¸–ç•Œå‰¯æœ¬"}),s.jsx("span",{children:"å·¦å³æ— é™æ»šåŠ¨ï¼Œæ˜¾ç¤ºå¤šä¸ªåœ°çƒå‰¯æœ¬"})]}),s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:a.renderWorldCopies,onChange:e=>l(n=>({...n,renderWorldCopies:e.target.checked}))}),s.jsx("span",{className:"slider"})]})]})]}),s.jsxs("div",{className:"setting-group",children:[s.jsx("h3",{children:"ç¼©æ”¾èŒƒå›´"}),s.jsxs("div",{className:"setting-row",children:[s.jsxs("div",{className:"setting-label",children:[s.jsx("strong",{children:"æœ€å°ç¼©æ”¾çº§åˆ«"}),s.jsx("span",{children:"æ•°å€¼è¶Šå°å¯ä»¥çœ‹åˆ°è¶Šå¤§èŒƒå›´"})]}),s.jsxs("div",{className:"range-control",children:[s.jsx("input",{type:"range",min:"0",max:"5",step:"1",value:a.minZoom,onChange:e=>l(n=>({...n,minZoom:Number(e.target.value)}))}),s.jsx("span",{className:"range-value",children:a.minZoom})]})]}),s.jsxs("div",{className:"setting-row",children:[s.jsxs("div",{className:"setting-label",children:[s.jsx("strong",{children:"æœ€å¤§ç¼©æ”¾çº§åˆ«"}),s.jsx("span",{children:"æ•°å€¼è¶Šå¤§å¯ä»¥çœ‹åˆ°è¶Šè¯¦ç»†"})]}),s.jsxs("div",{className:"range-control",children:[s.jsx("input",{type:"range",min:"15",max:"22",step:"1",value:a.maxZoom,onChange:e=>l(n=>({...n,maxZoom:Number(e.target.value)}))}),s.jsx("span",{className:"range-value",children:a.maxZoom})]})]})]})]}),i==="performance"&&s.jsxs("div",{className:"settings-page",children:[s.jsx("h2",{children:"ğŸš€ æ€§èƒ½ä¼˜åŒ–"}),s.jsx("p",{className:"page-desc",children:"è°ƒæ•´æ€§èƒ½å‚æ•°ä»¥è·å¾—æ›´æµç•…çš„ä½“éªŒ"}),s.jsxs("div",{className:"setting-group",children:[s.jsx("h3",{children:"æ¸²æŸ“è®¾ç½®"}),s.jsxs("div",{className:"setting-row",children:[s.jsxs("div",{className:"setting-label",children:[s.jsx("strong",{children:"ç“¦ç‰‡æ·¡å…¥æ—¶é—´"}),s.jsx("span",{children:"åœ°å›¾ç“¦ç‰‡åŠ è½½æ—¶çš„æ·¡å…¥åŠ¨ç”»æ—¶é•¿ï¼Œ0ä¸ºç«‹å³æ˜¾ç¤º"})]}),s.jsxs("div",{className:"range-control wide",children:[s.jsx("input",{type:"range",min:"0",max:"500",step:"50",value:a.fadeDuration,onChange:e=>l(n=>({...n,fadeDuration:Number(e.target.value)}))}),s.jsxs("span",{className:"range-value",children:[a.fadeDuration,"ms"]})]})]})]}),s.jsxs("div",{className:"setting-group",children:[s.jsx("h3",{children:"ç¼“å­˜è®¾ç½®"}),s.jsxs("div",{className:"setting-row",children:[s.jsxs("div",{className:"setting-label",children:[s.jsx("strong",{children:"ç“¦ç‰‡ç¼“å­˜æ•°é‡"}),s.jsx("span",{children:"å†…å­˜ä¸­ç¼“å­˜çš„åœ°å›¾ç“¦ç‰‡æ•°é‡ï¼Œè¶Šå¤§è¶Šæµç•…ä½†å ç”¨æ›´å¤šå†…å­˜"})]}),s.jsxs("div",{className:"range-control wide",children:[s.jsx("input",{type:"range",min:"1000",max:"6000",step:"500",value:a.maxTileCacheSize,onChange:e=>l(n=>({...n,maxTileCacheSize:Number(e.target.value)}))}),s.jsx("span",{className:"range-value",children:a.maxTileCacheSize})]})]})]}),s.jsxs("div",{className:"setting-tip",children:[s.jsx("span",{children:"ğŸ’¡"}),s.jsx("p",{children:"æ€§èƒ½è®¾ç½®ä¿®æ”¹åéœ€è¦é‡å¯åº”ç”¨æ‰èƒ½ç”Ÿæ•ˆã€‚å¦‚æœåœ°å›¾å¡é¡¿ï¼Œå¯ä»¥å°è¯•é™ä½ç“¦ç‰‡ç¼“å­˜æ•°é‡ã€‚"})]})]}),i==="storage"&&s.jsxs("div",{className:"settings-page",children:[s.jsx("h2",{children:"ğŸ’¾ å­˜å‚¨ç®¡ç†"}),s.jsx("p",{className:"page-desc",children:"æŸ¥çœ‹å’Œç®¡ç†åº”ç”¨æ•°æ®"}),s.jsxs("div",{className:"storage-cards",children:[s.jsxs("div",{className:"storage-card",children:[s.jsx("div",{className:"storage-icon",children:"ğŸ“"}),s.jsx("div",{className:"storage-value",children:h.length}),s.jsx("div",{className:"storage-label",children:"æ ‡è®°ç‚¹"})]}),s.jsxs("div",{className:"storage-card",children:[s.jsx("div",{className:"storage-icon",children:"ğŸ“·"}),s.jsx("div",{className:"storage-value",children:g}),s.jsx("div",{className:"storage-label",children:"ç…§ç‰‡"})]}),s.jsxs("div",{className:"storage-card",children:[s.jsx("div",{className:"storage-icon",children:"ğŸ—ºï¸"}),s.jsx("div",{className:"storage-value",children:o.count}),s.jsx("div",{className:"storage-label",children:"ç¼“å­˜ç“¦ç‰‡"})]}),s.jsxs("div",{className:"storage-card",children:[s.jsx("div",{className:"storage-icon",children:"ğŸ“¦"}),s.jsx("div",{className:"storage-value",children:(o.size/1024/1024).toFixed(1)}),s.jsx("div",{className:"storage-label",children:"MB ç¼“å­˜"})]})]}),s.jsxs("div",{className:"setting-group",children:[s.jsx("h3",{children:"æ•°æ®æ“ä½œ"}),s.jsxs("div",{className:"action-buttons",children:[s.jsxs("button",{className:"action-btn",onClick:async()=>{if(window.confirm("ç¡®å®šæ¸…é™¤æ‰€æœ‰ç“¦ç‰‡ç¼“å­˜ï¼Ÿè¿™ä¸ä¼šå½±å“ä½ çš„æ ‡è®°å’Œç…§ç‰‡ã€‚")){await window.electronAPI?.clearTileCache();const e=await window.electronAPI?.getCacheStats();e&&N(e)}},children:[s.jsx("span",{children:"ğŸ§¹"}),s.jsxs("div",{children:[s.jsx("strong",{children:"æ¸…é™¤ç“¦ç‰‡ç¼“å­˜"}),s.jsx("small",{children:"é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼Œä¸å½±å“æ ‡è®°æ•°æ®"})]})]}),s.jsxs("button",{className:"action-btn danger",onClick:async()=>{if(window.confirm("âš ï¸ ç¡®å®šåˆ é™¤æ‰€æœ‰æ ‡è®°å’Œç…§ç‰‡ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼")){for(const e of h)await window.electronAPI?.deleteMarker(e.id);v([])}},children:[s.jsx("span",{children:"ğŸ—‘ï¸"}),s.jsxs("div",{children:[s.jsx("strong",{children:"æ¸…é™¤æ‰€æœ‰æ•°æ®"}),s.jsx("small",{children:"åˆ é™¤æ‰€æœ‰æ ‡è®°å’Œç…§ç‰‡ï¼Œä¸å¯æ¢å¤"})]})]})]})]}),s.jsxs("div",{className:"setting-group",children:[s.jsx("h3",{children:"è°ƒè¯•å·¥å…·"}),s.jsx("div",{className:"action-buttons",children:s.jsxs("button",{className:"action-btn",onClick:async()=>{await window.electronAPI?.openLogFolder()},children:[s.jsx("span",{children:"ğŸ“‹"}),s.jsxs("div",{children:[s.jsx("strong",{children:"æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶"}),s.jsx("small",{children:"æ‰“å¼€æ—¥å¿—æ–‡ä»¶å¤¹ï¼Œç”¨äºé—®é¢˜æ’æŸ¥"})]})]})})]})]}),i==="about"&&s.jsxs("div",{className:"settings-page about-page",children:[s.jsxs("div",{className:"about-header",children:[s.jsx("div",{className:"about-icon",children:"ğŸ“"}),s.jsx("h1",{children:"åœ°å›¾ç›¸å†Œ"}),s.jsx("p",{className:"version",children:"ç‰ˆæœ¬ 1.0.0"})]}),s.jsx("p",{className:"about-desc",children:"åœ¨åœ°å›¾ä¸Šè®°å½•ä½ çš„æ—…è¡Œå›å¿†ï¼Œç”¨ç…§ç‰‡æ ‡è®°æ¯ä¸€ä¸ªå€¼å¾—çºªå¿µçš„åœ°ç‚¹ã€‚"}),s.jsxs("div",{className:"about-features",children:[s.jsxs("div",{className:"feature",children:[s.jsx("span",{children:"ğŸ—ºï¸"}),s.jsxs("div",{children:[s.jsx("strong",{children:"äº¤äº’å¼åœ°å›¾"}),s.jsx("small",{children:"åŸºäº Mapbox GL çš„æµç•…åœ°å›¾ä½“éªŒ"})]})]}),s.jsxs("div",{className:"feature",children:[s.jsx("span",{children:"ğŸ“·"}),s.jsxs("div",{children:[s.jsx("strong",{children:"ç…§ç‰‡ç®¡ç†"}),s.jsx("small",{children:"ä¸ºæ¯ä¸ªåœ°ç‚¹æ·»åŠ å¤šå¼ ç…§ç‰‡å’Œå¤‡æ³¨"})]})]}),s.jsxs("div",{className:"feature",children:[s.jsx("span",{children:"ğŸ”"}),s.jsxs("div",{children:[s.jsx("strong",{children:"æ™ºèƒ½æœç´¢"}),s.jsx("small",{children:"å¿«é€Ÿæœç´¢å…¨çƒä»»æ„åœ°ç‚¹"})]})]}),s.jsxs("div",{className:"feature",children:[s.jsx("span",{children:"ğŸ’¾"}),s.jsxs("div",{children:[s.jsx("strong",{children:"æœ¬åœ°å­˜å‚¨"}),s.jsx("small",{children:"æ•°æ®å®‰å…¨å­˜å‚¨åœ¨æœ¬åœ°"})]})]})]}),s.jsx("div",{className:"about-footer",children:s.jsx("p",{children:"ä½¿ç”¨ Electron + React + Mapbox GL æ„å»º"})})]}),(i==="map"||i==="performance")&&s.jsxs("div",{className:"settings-footer",children:[s.jsx("button",{className:"save-btn",disabled:JSON.stringify(a)===JSON.stringify(c),onClick:()=>{d(a),localStorage.setItem("mapSettings",JSON.stringify(a)),t(!1)},children:"ä¿å­˜è®¾ç½®"}),s.jsx("p",{className:"save-hint",children:JSON.stringify(a)!==JSON.stringify(c)?"* è®¾ç½®å·²æ›´æ”¹ï¼Œç‚¹å‡»ä¿å­˜ç”Ÿæ•ˆ":"éƒ¨åˆ†è®¾ç½®éœ€è¦é‡å¯åº”ç”¨åç”Ÿæ•ˆ"})]})]})]})}):null}export{w as default};
